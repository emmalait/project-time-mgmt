{% extends "layout.html" %} {% block body %}

<h2>Time logs</h2>

<p>
    <div class="col-12">
           <table class="table table-striped">
                <tr>
                    <th>Customer</th>
                    <th>Project</th>
                    <th>Work type</th>
                    <th>Description</th>
                    <th>Hours</th>
                    <th>Cleared for invoicing</th>
                    <th></th>
                    <th></th>
                    {% if current_user.role == "manager" %}
                    <th></th>
                    {% endif %}
                </tr>
                {% for timelog in timelogs %}
                <tr>
                    <td>{{ timelog.customer_name }}</td>
                    <td>{{ timelog.project_name }}</td>
                    <td>{{ timelog.work_type_name }}</td>
                    <td>{{ timelog.description }}</td>
                    <td>{{ timelog.hours}}</td>  
                    <td>
                        {% if timelog.cleared == True %}
                        <span class="badge badge-success">Cleared</span>
                        {% endif %}
                        {% if timelog.cleared == False %}
                        <span class="badge badge-secondary">Not cleared</span>
                        {% endif %}
                    </td>
                    <td>
                        <form method="GET" action="{{ url_for('timelog', timelog_id=timelog.id) }}">
                            <input type="submit" value="Edit" class="btn btn-dark btn-sm"/>
                        </form>
                    </td>
                    <td>
                        <form method="POST" action="{{ url_for('timelogs_delete', timelog_id=timelog.id) }}">
                            <input type="submit" value="Delete" class="btn btn-dark btn-sm"/>
                        </form>
                    </td>
                    {% if current_user.role == "manager" %}
                    <td>
                        <form method="POST" action="{{ url_for('timelogs_toggle_cleared', timelog_id=timelog.id) }}">
                            <input type="submit" value="Toggle cleared" class="btn btn-dark btn-sm"/>
                        </form>
                    </td>
                    {% endif %}
                </tr>
                {% endfor %}
            </table>
    </div>
</p>

<p><a href="{{ url_for('timelogs_form') }}" class="btn btn-dark">Log time</a></p>

{% endblock %}
